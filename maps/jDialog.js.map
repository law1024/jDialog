{"version":3,"sources":["core.js","helper.js","event.js","operations.js","setting.js","components.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5VA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"jDialog.js","sourcesContent":["var win = window;\nvar doc = document;\nvar jDialog = function (message, callBack) {\n    /**\n     *\n     */\n    return new jDialog.fn.init(message, callBack);\n};\n\n/**\n *\n * @type {{constructor: Function, init: Function}}\n */\njDialog.fn = jDialog.prototype = {\n    constructor: jDialog,\n    version: '0.9.3',\n    /**\n     * @method init\n     * @param message\n     * @param callBack\n     * @returns {jDialog}\n     */\n    init: function (message, callBack) {\n\n        if (!message) {\n            return this;\n        }\n        this.options = {\n            title: '提示',          // title\n            modal: true,        //是否启用模式窗口\n            msg: '',                // messages\n            autoHide: 0,        // 自动销毁\n            /**\n             *  对话框class前缀，默认无\n             *  强制使用BEM规范\n             *  前缀在所有的dom结构上，均会被添加\n             */\n            prefix: \"\",\n            fixed: false,\n            preventHide: false,\n            callBack: null\n        };\n\n        if (this.isPlainObject(message)) {\n            this.extend(this.options, message);\n\n        } else if (/string|number|boolean/gi.test(typeof(message))) {\n            this.options.msg = message;\n            if (this.isFunction(callBack)) {\n                this.options.callBack = callBack;\n            }\n        }\n\n        this.actions = {};\n        jDialog.event.root = this;\n        this.renderDOM();\n\n        // 只存活一个dialog\n        if (jDialog.currentDialog) {\n            jDialog.currentDialog.destory();\n        }\n        jDialog.currentDialog = this;\n        return this;\n    }\n};\n\n/**\n * 浅copy\n * @returns {*|{}}\n */\njDialog.extend = jDialog.fn.extend = function () {\n\n    var target = arguments[0] || {};\n    var options = arguments[1] || {};\n    var name;\n    var copy;\n\n    if (arguments.length === 1) {\n        target = this;\n        options = arguments[0];\n    }\n\n    for (name in options) {\n        copy = options[name];\n        if (copy !== undefined) {\n            target[name] = copy;\n        }\n    }\n\n    return target;\n};\n\n/**\n *\n * @type {{constructor: Function, init: Function}|jDialog.fn|*}\n */\njDialog.fn.init.prototype = jDialog.fn;","jDialog.fn.extend({\n    /**\n     * is function\n     * @param fn\n     * @returns {boolean}\n     */\n    isFunction: function (fn) {\n        return Object.prototype.toString.call(fn) === '[object Function]';\n    },\n\n    /**\n     * 简单高效\n     * @param obj\n     * @returns {boolean}\n     */\n    isPlainObject: function (obj) {\n        if (obj === null) {\n            return false;\n        }\n        return obj.constructor == {}.constructor;\n    }\n});","/**\n *\n * @type {{add: Function, remove: Function, has: Function, fire: Function}}\n */\njDialog.event = {\n    add: function (actionName, handler) {\n        var self = this.root;\n        if (!this.has(actionName)) {\n            self.actions[actionName] = [];\n        }\n        if (self.isFunction(handler)) {\n            self.actions[actionName].push(handler);\n        }\n    },\n    remove: function (actionName) {\n        var self = this.root;\n        if (this.has(actionName)) {\n            return delete self.actions[actionName];\n        }\n        console.warn(actionName + '不存在');\n        return false;\n    },\n    has: function (actionName) {\n        var self = this.root;\n        return self.actions[actionName] ? true : false;\n    },\n    fire: function (actionName) {\n        var self = this.root;\n        if (this.has(actionName)) {\n            var actions = self.actions[actionName];\n            var length = actions.length;\n            if (!length) {\n                return false;\n            }\n            var i = 0;\n            for (; i < length; i++) {\n                actions[i].call(self);\n            }\n        }\n    }\n};","jDialog.fn.extend({\n\n    /**\n     *\n     * @returns {*}\n     */\n    renderDOM: function () {\n\n        var wrapper = this.getWrapper();\n        var options = this.options;\n\n        wrapper\n            .appendChild(this.getHeader());\n        wrapper\n            .appendChild(this.getContainer());\n        wrapper\n            .appendChild(this.getFooter());\n\n        //\n        this.title(options.title)\n            .message(options.msg);\n\n        if (options.modal) {\n            this.showModal();\n        }\n\n        if (options.callBack) {\n            this.addButton('确定', 'apply', options.callBack);\n        }\n\n        this.addButton('取消', 'destory', function () {\n            this.destory();\n        });\n        wrapper.addEventListener('click', this.eventRouter.bind(this), false);\n        doc.body.appendChild(wrapper);\n        this.verticalInViewPort(options.fixed);\n        return this;\n    },\n\n    /**\n     * 保证 position:fixed 的dialog永远处于视口内；\n     */\n    verticalInViewPort: function (isFixed) {\n        var docElement = doc.documentElement;\n        var clientHeight = docElement.clientHeight;\n        var dialogHeight = this.height();\n\n        if (isFixed) {\n\n            if (dialogHeight > clientHeight) {\n                dialogHeight = clientHeight - 30;\n                this.getContainer().style.height =\n                    dialogHeight - (this.getHeader().offsetHeight + this.getFooter().offsetHeight) + 'px';\n            }\n            this.height(dialogHeight)\n                .toggleLockBody(true)\n                .extend(this.getWrapper().style, {\n                    position: \"fixed\",\n                    bottom: 0,\n                    top: 0\n                });\n\n        } else {\n\n            var scrollTop = docElement.scrollTop;\n            var top = Math.max((clientHeight - dialogHeight) * 382 / 1000 + scrollTop, scrollTop);\n\n            this.top(top)\n                .height('auto')\n                .toggleLockBody(false)\n                .getContainer().style.height = \"auto\";\n\n        }\n\n        return this;\n    },\n\n    /**\n     * 锁住body的scroll，不让其滚动；\n     * @param useLock\n     */\n    toggleLockBody: function (useLock) {\n        var height = \"\";\n        var hiddenType = \"\";\n        if (useLock) {\n            height = \"100%\";\n            hiddenType = \"hidden\";\n        }\n        doc.body.style.height = height;\n        doc.body.style.overflow = hiddenType;\n        return this;\n    },\n\n    /**\n     *\n     * @param event\n     */\n    eventRouter: function (event) {\n        var target = event.target;\n        var actionName = target.getAttribute('data-dialog-action');\n        if (!actionName) {\n            return;\n        }\n        jDialog.event.fire(actionName);\n    },\n\n    /**\n     *\n     * @param tagName\n     * @param attrs\n     * @returns {HTMLElement}\n     * @private\n     */\n    _createElement: function (tagName, attrs) {\n        var element = doc.createElement(tagName);\n        this.extend(element, attrs);\n        return element;\n    },\n\n    /**\n     *  获取dialog的DOM结构\n     * @returns {HTMLElement|*|wrapper}\n     */\n    getWrapper: function () {\n        if (!this.wrapper) {\n            var prefix = this.options.prefix;\n            this.wrapper = this._createElement('div', {\n                className: prefix + 'dialog'\n            });\n\n            this.wrapper.style.zIndex = this.currentDOMIndex = 9;\n        }\n\n        return this.wrapper;\n    },\n\n    /**\n     *  获取页头的DOM结构\n     * @returns {HTMLElement|*|header}\n     */\n    getHeader: function () {\n        if (!this.header) {\n            var prefix = this.options.prefix;\n            this.header = this._createElement('div', {\n                className: prefix + 'dialog-header'\n            });\n        }\n        return this.header;\n    },\n\n    /**\n     * 隐藏页头\n     * @returns {*}\n     */\n    hideHeader: function () {\n        var header = this.getHeader();\n        var height = header.offsetHeight;\n        this.height(this.height() - height);\n        header.style.display = 'none';\n        return this;\n    },\n\n    /**\n     * 获取当前dialog内容的DOM结构\n     * @returns {HTMLElement|*|container}\n     */\n    getContainer: function () {\n        if (!this.container) {\n            var prefix = this.options.prefix;\n            this.container = this._createElement('div', {\n                className: prefix + 'dialog-body'\n            });\n        }\n        return this.container;\n    },\n\n    /**\n     * 获取页尾的dom结构\n     * @returns {HTMLElement|*|footer}\n     */\n    getFooter: function () {\n        if (!this.footer) {\n            var prefix = this.options.prefix;\n            this.footer = this._createElement('div', {\n                className: prefix + 'dialog-footer'\n            });\n        }\n        return this.footer;\n    },\n\n    /**\n     * 隐藏页尾\n     * @returns {*}\n     */\n    hideFooter: function () {\n        var footer = this.getFooter();\n        var height = footer.offsetHeight;\n        this.height(this.height() - height);\n        footer.style.display = 'none';\n        return this;\n    },\n\n    /**\n     *\n     * @param text\n     * @param actionName\n     * @param handler\n     * @returns {*}\n     */\n    addButton: function (text, actionName, handler) {\n        var prefix = this.options.prefix;\n        var element = this._createElement('a', {\n            href: 'javascript:;',\n            className: prefix + 'dialog-btn',\n            innerHTML: text || '按钮'\n        });\n        if (actionName) {\n            element.setAttribute('data-dialog-action', actionName);\n            jDialog.event.add(actionName, handler);\n        }\n        //\n        this.getFooter().appendChild(element);\n        return this;\n    },\n\n    /**\n     * 为当前dialog添加class\n     * @param className\n     * @returns {*}\n     */\n    addClass: function (className) {\n        // 自动补齐前缀\n        //var prefix = this.options.prefix;\n        //var reg = new RegExp('^' + prefix, 'gi');\n        //if (!reg.test(className)) {\n        //    className = prefix + className;\n        //}\n        this.getWrapper().classList.add(className);\n        return this;\n    },\n\n    /**\n     * 为当前dialog添加remove\n     * @param className\n     */\n    removeClass: function (className) {\n        //var prefix = this.options.prefix;\n        //var reg = new RegExp('^' + prefix, 'gi');\n        //if (!reg.test(className)) {\n        //    className = prefix + className;\n        //}\n        this.getWrapper().classList.remove(className);\n    },\n\n    /**\n     * 设置自动隐藏时间\n     * @param delay  为0，直接销毁；不设置，采用默认用户设置；\n     * @returns {*}\n     */\n    autoHide: function (delay) {\n\n        // 0则自动销毁；\n        if (delay == 0) {\n            this.destory();\n            return this;\n        }\n\n        //\n        if (delay === undefined) {\n            this.autoHide(this.options.autoHide);\n            return this;\n        }\n\n        // 将会已最新的delay为准\n        if (this.autoHideTimer) {\n            clearTimeout(this.autoHideTimer);\n        }\n\n        this.autoHideTimer = setTimeout(function () {\n            this.destory();\n            clearTimeout(this.autoHideTimer);\n            this.autoHideTimer = null;\n        }.bind(this), delay * 1000);\n\n        return this;\n    },\n\n    /**\n     *\n     * @returns {*}\n     */\n    destory: function () {\n        if (this.wrapper) {\n            this.wrapper.removeEventListener('click', this.eventRouter, false);\n            doc.body.removeChild(this.wrapper);\n        }\n        if (this.modal) {\n            doc.body.removeChild(this.modal);\n        }\n        this.toggleLockBody(false);\n        jDialog.currentDialog = null;\n        return this;\n    },\n\n    /**\n     *\n     * @returns {HTMLElement}\n     */\n    createModal: function () {\n        var element = this._createElement('div');\n        element.style.cssText = \";background:rgba(0,0,0,0.3);width:100%;\" + \"height:100%;position:fixed;left:0;top:0;z-index:\" + (this.currentDOMIndex - 1);\n        element.onclick = function () {\n            //jDialog.event.fire('destory');\n        }.bind(this);\n        doc.body.appendChild(element);\n        return element;\n    },\n\n    /**\n     * 获取当前dialog的Modal的DOM结构\n     * @returns {modal|*}\n     */\n    getModal: function () {\n        if (!this.modal) {\n            this.modal = this.createModal();\n        }\n        return this.modal;\n    },\n\n    /**\n     * 隐藏当前dialog的Modal\n     * @returns {*}\n     */\n    hideModal: function () {\n        this.getModal().style.display = 'none';\n        return this;\n    },\n\n    /**\n     * 显示当前dialog的Modal\n     * @returns {*}\n     */\n    showModal: function () {\n        this.getModal().style.display = '';\n        return this;\n    }\n});\n","/**\n *  设置类函数集\n * @param number\n * @returns {*}\n */\nvar addPixelUnit = function (number) {\n    if (!/em|px|rem|pt|%|auto/gi.test(number)) {\n        number = number + 'px';\n    }\n    return number;\n};\n\njDialog.fn.extend({\n\n    /**\n     * 返回当前的title或为dialog设置title\n     * @param text\n     * @returns {*}\n     */\n    title: function (value) {\n        if (value === undefined) {\n            return this.options.title;\n        }\n        this.getHeader().innerHTML = value;\n        return this;\n    },\n\n    /**\n     * 返回当前设置的message或设置message\n     * @param value\n     * @returns {*}\n     */\n    message: function (value) {\n        if (value === undefined) {\n            return this.options.msg;\n        }\n        this.getContainer().innerHTML = value;\n        return this;\n    },\n\n    /**\n     * 返回当前的height或为dialog设置height\n     * @param value\n     * @returns {*}\n     */\n    height: function (value) {\n        if (value === undefined) {\n            return this.getWrapper().offsetHeight;\n        }\n        this.wrapper.style.height = addPixelUnit(value);\n        return this;\n    },\n\n    /**\n     * 返回当前dialog的宽度或为dialog设置宽度\n     * @param value\n     * @returns {*}\n     */\n    width: function (value) {\n        if (value === undefined) {\n            return this.getWrapper().offsetWidth;\n        }\n        this.wrapper.style.width = addPixelUnit(value);\n        return this;\n    },\n\n    /**\n     * 返回当前的z-index值或为dialog设置z-index\n     * @param index\n     * @returns {*}\n     */\n    index: function (value) {\n        if (value === undefined) {\n            return this.currentDOMIndex;\n        }\n        this.currentDOMIndex = value;\n        this.wrapper.style.zIndex = this.currentDOMIndex;\n        // 永远比wrapper小1\n        this.getModal().style.zIndex = this.currentDOMIndex - 1;\n        return this;\n    },\n\n    /**\n     * 返回当前的top值或者为dialog设置top\n     * @param value\n     * @returns {*}\n     */\n    top: function (value) {\n        if (value === undefined) {\n            return win.getComputedStyle(this.getWrapper()).top;\n        }\n        this.wrapper.style.top = addPixelUnit(value);\n        this.wrapper.style.bottom = \"\";\n        return this;\n    },\n\n    /**\n     * 相对于视口，还是相对于文档流\n     * @param useAbsolute\n     * @returns {*}\n     */\n    fixed: function (useAbsolute) {\n        if (!useAbsolute) {\n            this.getWrapper().style.position = \"fixed\";\n        } else {\n            this.getWrapper().style.position = \"absolute\";\n        }\n        this.verticalInViewPort(!useAbsolute);\n        return this;\n    }\n});","/**\n *  封装一些常用的dialog\n */\njDialog.extend({\n    alert: function (message) {\n        return jDialog(message);\n    },\n    toast: function (message, delay) {\n        var dialog = jDialog(message);\n        dialog.getContainer().style.textAlign = \"center\";\n        dialog\n            .hideFooter()\n            .hideHeader()\n            .hideModal()\n            .addClass('dialog-toast')\n            .autoHide(delay || 3);\n        return dialog;\n    },\n    error: function (message, callBack) {\n        return jDialog(message,callBack).addClass('dialog-error');\n    }\n});"],"sourceRoot":"/source/"}